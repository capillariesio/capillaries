{
    "deployment_name": "{deployment_name}",
    "ssh_config": {
        "bastion_ip_address": "{floating_ip_address}",
        "port": 22,
        "user": "ubuntu",
        "private_key_path": "{private_key_path}",
        "private_key_password": "{private_key_password}"
    },
    "root_key_name": "{deployment_name}_root_key",
    "availability_zone": "iad-2",
    "timeouts": {
        "openstack_cmd": 60,
        "openstack_instance_creation": 120,
        "attach_volume": 60
    },
    "openstack_environment_variables": {
        "OS_AUTH_URL": "{OS_AUTH_URL}",
        "OS_IDENTITY_API_VERSION": "3",
        "OS_INTERFACE": "public",
        "OS_PASSWORD": "{OS_PASSWORD}",
        "OS_PROJECT_ID": "{OS_PROJECT_ID}",
        "OS_PROJECT_NAME": "{OS_PROJECT_NAME}",
        "OS_REGION_NAME": "RegionOne",
        "OS_USERNAME": "{OS_USERNAME}",
        "OS_USER_DOMAIN_NAME": "Default"
    },
    "security_group": {
        "name": "{deployment_name}_security_group",
        "id": "c02e9068-5057-4213-89b7-48ca9dca86f1",
        "rules": [
            {
                "id": "c58f1583-d4f2-48f1-bc60-1a28b768316c",
                "protocol": "tcp",
                "ethertype": "IPv4",
                "remote_ip": "0.0.0.0/0",
                "port": 22,
                "direction": "ingress"
            },
            {
                "id": "62f91a67-cab9-41ee-ae53-1a74331b2842",
                "protocol": "tcp",
                "ethertype": "IPv4",
                "remote_ip": "0.0.0.0/0",
                "port": 9090,
                "direction": "ingress"
            },
            {
                "id": "df3fdc4d-45dc-4a55-991f-882b547e4f5b",
                "protocol": "tcp",
                "ethertype": "IPv4",
                "remote_ip": "10.5.0.0/24",
                "port": 9100,
                "direction": "ingress"
            }
        ]
    },
    "network": {
        "name": "{deployment_name}_network",
        "id": "241cfeeb-ec0f-4cfc-91ef-36f6ef439950",
        "subnet": {
            "name": "{deployment_name}_subnet",
            "id": "ee5af192-0bfa-44fb-aa46-20e5407562d7",
            "cidr": "10.5.0.0/24"
        },
        "router": {
            "name": "{deployment_name}_router",
            "id": "4ea468b5-44d8-43dc-94db-538c916b5731",
            "external_gateway_network_name": "public"
        }
    },
    "volumes": {
        "cfg": {
            "name": "{deployment_name}_cfg",
            "mount_point": "/mnt/capi_cfg",
            "size": 1,
            "permissions": 447,
            "id": "6929821f-7c4a-4ad1-ae78-a15b11b9de2c"
        },
        "in": {
            "name": "{deployment_name}_in",
            "mount_point": "/mnt/capi_in",
            "size": 1,
            "permissions": 447,
            "id": "7870510f-8eed-4926-9496-99909a264b78"
        },
        "out": {
            "name": "{deployment_name}_out",
            "mount_point": "/mnt/capi_out",
            "size": 1,
            "permissions": 667,
            "id": "ae1c8dad-8743-449c-9f2f-b7c8d3c3c0d7"
        }
    },
    "file_groups_up": {
        "up_capi_scripts": {
            "src": "../../../test/data/cfg",
            "dst": "/mnt/capi_cfg",
            "permissions": 644
        }
    },
    "file_groups_down": {
        "down_capi_scripts": {
            "src": "/mnt/capi_cfg",
            "dst": "./tmp/capi_cfg"
        }
    },
    "instances": {
        "bastion": {
            "host_name": "{deployment_name}-bastion",
            "ip_address": "10.5.0.2",
            "floating_ip_address": "{floating_ip_address}",
            "flavor": "gp1.semisonic",
            "image": "Ubuntu-22.04",
            "attached_volumes": {
                "cfg": {
                    "attachment_id": "f68a5f0f-2927-40b9-a64c-3215b692ecd4",
                    "device": "/dev/vdb",
                    "block_device_id": "2271e05b-8b34-497d-b8ae-d0393a2841e8"
                },
                "in": {
                    "attachment_id": "f0e6dc80-c8fd-479c-ba77-d66ba23b944a",
                    "device": "/dev/vdc",
                    "block_device_id": "42a0b631-94c2-495c-a390-a2d2715cd727"
                },
                "out": {
                    "attachment_id": "ced360b3-7eab-4ba4-a860-df9bd3e3ec0e",
                    "device": "/dev/vdd",
                    "block_device_id": "b519d9f4-5402-417f-809d-e601f3133c1e"
                }
            },
            "id": "31ccd986-25f2-4109-9ec2-f11005819b42",
            "service": {
                "env": {
                    "PROMETHEUS_NODE_EXPORTER_VERSION": "1.5.0",
                    "PROMETHEUS_IP":"10.5.0.4"
                },
                "cmd": {
                    "setup": [
                        "sh/common/replace_nameserver.sh",
                        "sh/prometheus/setup_node_exporter.sh",
                        "sh/nginx/install_nginx.sh",
                        "sh/nginx/add_prometheus_reverse_proxy.sh"
                    ],
                    "start": [
                        "sh/prometheus/start_node_exporter.sh",
                        "sh/nginx/start_nginx.sh"
                    ],
                    "stop": [
                        "sh/prometheus/stop_node_exporter.sh",
                        "sh/nginx/stop_nginx.sh"
                    ]
                }
            },
            "applicable_file_groups": [
                "up_capi_scripts",
                "down_capi_scripts"
            ]
        },
        "prometheus": {
            "host_name": "{deployment_name}-prometheus",
            "ip_address": "10.5.0.4",
            "floating_ip_address": "",
            "flavor": "gp1.semisonic",
            "image": "Ubuntu-22.04",
            "attached_volumes": null,
            "id": "56ddce98-44c1-44de-afef-c64096513b71",
            "service": {
                "env": {
                    "PROMETHEUS_NODE_EXPORTER_VERSION": "1.5.0",
                    "PROMETHEUS_TARGETS": "\\'localhost:9100\\',\\'10.5.0.2:9100\\'",
                    "PROMETHEUS_VERSION": "2.41.0"
                },
                "cmd": {
                    "setup": [
                        "sh/common/replace_nameserver.sh",
                        "sh/prometheus/setup_server.sh",
                        "sh/prometheus/setup_node_exporter.sh"
                    ],
                    "start": [
                        "sh/prometheus/start_server.sh",
                        "sh/prometheus/start_node_exporter.sh"
                    ],
                    "stop": [
                        "sh/prometheus/stop_server.sh",
                        "sh/prometheus/stop_node_exporter.sh"
                    ]
                }
            },
            "applicable_file_groups": null
        }
    }
}